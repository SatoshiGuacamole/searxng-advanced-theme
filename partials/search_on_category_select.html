{% if 'searx.plugins.search_on_category_select' in request.preferences.plugins.get_enabled() %}
<script defer>
document.addEventListener("DOMContentLoaded", () => {
  [...document.querySelectorAll('#categories_container > .category > input[type="checkbox"]')]
    .forEach(input => {
      input.addEventListener('change', () => {
        input.checked = true;

        [...document.querySelectorAll(`#categories_container > .category > input[type="checkbox"]:not([name="${input.name}"])`)]
          .forEach(siblingInput => {
            siblingInput.checked = false;
          });

        input.form.submit();
      });
    });
});
</script>
{% endif %}
